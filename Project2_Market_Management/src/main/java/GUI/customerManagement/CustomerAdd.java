/*
 * Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
 * Click nbfs://nbhost/SystemFileSystem/Templates/GUIForms/JPanel.java to edit this template
 */
package GUI.customerManagement;

import java.util.Date;

import javax.swing.JOptionPane;

import BLL.CustomersBLL;
import DAL.Customers;

/**
 *
 * @author Bao
 */
public class CustomerAdd extends javax.swing.JPanel {

        /**
         * Creates new form CustomerAdd
         */
        public CustomerAdd() {
                initComponents();
        }

        private CustomersBLL customersBLL = new CustomersBLL();

        /**
         * This method is called from within the constructor to initialize the form.
         * WARNING: Do NOT modify this code. The content of this method is always
         * regenerated by the Form Editor.
         */
        @SuppressWarnings("unchecked")
        // <editor-fold defaultstate="collapsed" desc="Generated
        // Code">//GEN-BEGIN:initComponents
        private void initComponents() {

                lbCustomerAdd = new javax.swing.JLabel();
                btSave = new javax.swing.JButton();
                pnContainer = new javax.swing.JPanel();
                pnFullName = new javax.swing.JPanel();
                tfFullName = new javax.swing.JTextField();
                pnAddress = new javax.swing.JPanel();
                tfAddress = new javax.swing.JTextField();
                pnCity = new javax.swing.JPanel();
                tfCity = new javax.swing.JTextField();

                lbCustomerAdd.setText("Thêm khách hàng");

                btSave.setText("Lưu");
                btSave.addActionListener(new java.awt.event.ActionListener() {
                        public void actionPerformed(java.awt.event.ActionEvent evt) {
                                btSaveActionPerformed(evt);
                        }
                });

                pnContainer.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Thông tin khách hàng",
                                javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
                                javax.swing.border.TitledBorder.TOP));

                pnFullName.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Họ và tên",
                                javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
                                javax.swing.border.TitledBorder.TOP));
                pnFullName.setPreferredSize(new java.awt.Dimension(64, 22));

                javax.swing.GroupLayout pnFullNameLayout = new javax.swing.GroupLayout(pnFullName);
                pnFullName.setLayout(pnFullNameLayout);
                pnFullNameLayout.setHorizontalGroup(
                                pnFullNameLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                pnFullNameLayout.createSequentialGroup()
                                                                                .addContainerGap()
                                                                                .addComponent(tfFullName)
                                                                                .addContainerGap()));
                pnFullNameLayout.setVerticalGroup(
                                pnFullNameLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                pnFullNameLayout.createSequentialGroup()
                                                                                .addComponent(tfFullName)
                                                                                .addContainerGap()));

                pnAddress.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Địa chỉ",
                                javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
                                javax.swing.border.TitledBorder.TOP));
                pnAddress.setPreferredSize(new java.awt.Dimension(64, 22));

                javax.swing.GroupLayout pnAddressLayout = new javax.swing.GroupLayout(pnAddress);
                pnAddress.setLayout(pnAddressLayout);
                pnAddressLayout.setHorizontalGroup(
                                pnAddressLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                pnAddressLayout.createSequentialGroup()
                                                                                .addContainerGap()
                                                                                .addComponent(tfAddress)
                                                                                .addContainerGap()));
                pnAddressLayout.setVerticalGroup(
                                pnAddressLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                pnAddressLayout.createSequentialGroup()
                                                                                .addComponent(tfAddress)
                                                                                .addContainerGap()));

                pnCity.setBorder(javax.swing.BorderFactory.createTitledBorder(null, "Thành phố",
                                javax.swing.border.TitledBorder.DEFAULT_JUSTIFICATION,
                                javax.swing.border.TitledBorder.TOP));
                pnCity.setPreferredSize(new java.awt.Dimension(64, 22));

                javax.swing.GroupLayout pnCityLayout = new javax.swing.GroupLayout(pnCity);
                pnCity.setLayout(pnCityLayout);
                pnCityLayout.setHorizontalGroup(
                                pnCityLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, pnCityLayout
                                                                .createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(tfCity,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                495, Short.MAX_VALUE)
                                                                .addContainerGap()));
                pnCityLayout.setVerticalGroup(
                                pnCityLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                pnCityLayout.createSequentialGroup()
                                                                                .addComponent(tfCity)
                                                                                .addContainerGap()));

                javax.swing.GroupLayout pnContainerLayout = new javax.swing.GroupLayout(pnContainer);
                pnContainer.setLayout(pnContainerLayout);
                pnContainerLayout.setHorizontalGroup(
                                pnContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(pnContainerLayout.createSequentialGroup()
                                                                .addGroup(
                                                                                pnContainerLayout.createParallelGroup(
                                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                                .addComponent(pnFullName,
                                                                                                                javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                517,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addComponent(pnAddress,
                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                517,
                                                                                                                Short.MAX_VALUE)
                                                                                                .addComponent(pnCity,
                                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                                517,
                                                                                                                Short.MAX_VALUE))
                                                                .addContainerGap()));
                pnContainerLayout.setVerticalGroup(
                                pnContainerLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(pnContainerLayout.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(pnFullName,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                51,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(pnAddress,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                51,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(pnCity,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                51,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)));

                javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
                this.setLayout(layout);
                layout.setHorizontalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(layout.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addGroup(layout.createParallelGroup(
                                                                                javax.swing.GroupLayout.Alignment.LEADING)
                                                                                .addGroup(layout.createSequentialGroup()
                                                                                                .addComponent(lbCustomerAdd,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                                204,
                                                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                                                .addGap(0, 0, Short.MAX_VALUE))
                                                                                .addGroup(javax.swing.GroupLayout.Alignment.TRAILING,
                                                                                                layout.createSequentialGroup()
                                                                                                                .addGap(0, 0, Short.MAX_VALUE)
                                                                                                                .addComponent(btSave))
                                                                                .addComponent(pnContainer,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                                Short.MAX_VALUE))
                                                                .addContainerGap()));
                layout.setVerticalGroup(
                                layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                                .addGroup(layout.createSequentialGroup()
                                                                .addContainerGap()
                                                                .addComponent(lbCustomerAdd,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                25,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                                                .addComponent(pnContainer,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                javax.swing.GroupLayout.PREFERRED_SIZE)
                                                                .addPreferredGap(
                                                                                javax.swing.LayoutStyle.ComponentPlacement.RELATED,
                                                                                javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                Short.MAX_VALUE)
                                                                .addComponent(btSave)
                                                                .addContainerGap()));
        }// </editor-fold>//GEN-END:initComponents

        private void btSaveActionPerformed(java.awt.event.ActionEvent evt) {
                String fullName = tfFullName.getText().trim();
                String address = tfAddress.getText().trim();
                String city = tfCity.getText().trim();

                if (fullName.isEmpty() || address.isEmpty() || city.isEmpty()) {
                        JOptionPane.showMessageDialog(this, "Vui lòng điền đầy đủ thông tin.", "Lỗi",
                                        JOptionPane.ERROR_MESSAGE);
                        return;
                }

                if (fullName.matches(".*\\d+.*")) {
                        JOptionPane.showMessageDialog(this, "Họ và tên không được chứa số.", "Lỗi",
                                        JOptionPane.ERROR_MESSAGE);
                        return;
                }

                CustomersBLL customersBLL = new CustomersBLL();
                int id = customersBLL.loadCustomers().size() + 1;
                Customers newCustomer = new Customers();
                newCustomer.setId(id);
                newCustomer.setFullname(fullName);
                newCustomer.setPassword("Abcd1234");
                newCustomer.setAddress(address);
                newCustomer.setCity(city);

                customersBLL.newCustomer(newCustomer);

                JOptionPane.showMessageDialog(this, "Thêm khách hàng thành công.", "Thông báo",
                                JOptionPane.INFORMATION_MESSAGE);
        }

        // Variables declaration - do not modify//GEN-BEGIN:variables
        private javax.swing.JButton btSave;
        private javax.swing.JLabel lbCustomerAdd;
        private javax.swing.JPanel pnAddress;
        private javax.swing.JPanel pnCity;
        private javax.swing.JPanel pnContainer;
        private javax.swing.JPanel pnFullName;
        private javax.swing.JTextField tfAddress;
        private javax.swing.JTextField tfCity;
        private javax.swing.JTextField tfFullName;
        // End of variables declaration//GEN-END:variables
}
